#!api-testing
# yaml-language-server: $schema=https://linuxsuren.github.io/api-testing/api-testing-schema.json
name: atest
api: |
  {{default "http://localhost:8080" (env "SERVER")}}/api/v1
param:
  server: |
    {{default "http://localhost:8080" (env "SERVER")}}
items:
- name: listMenus
  before:
    items:
      - httpReady("{{.param.server}}/healthz", 2400)
  request:
    api: /extension/menus
    body: |
      {
          "data": [
              {
                  "name": "mermaid",
                  "index": "mermaid",
                  "icon": "PieChart",
                  "version": 0
              }
          ]
      }
- name: getStaticFile
  request:
    api: /extension/pages/mindmap.txt/static
- name: getJS
  request:
    api: /extension/pages/mermaid/js
- name: getJS
  request:
    api: /extension/pages/mermaid/css
